# ============================================
# P2P EXCHANGE - ENVIRONMENT CONFIGURATION
# ============================================

# ─────────────────────────────────────────
# EMBEDDED GRAPE DHT (TRUE P2P) ⭐
# ─────────────────────────────────────────
# Enable/disable embedded Grape server (default: true)
# Set to false to use external Grape servers (legacy mode)
EMBEDDED_GRAPE=true

# Grape DHT port (each node needs different port on same machine)
# Default: 20001
# Node 1: 20001, Node 2: 20002, Node 3: 20003, etc.
GRAPE_DHT_PORT=20001

# Grape HTTP API port (each node needs different port on same machine)
# Default: 30001
# Node 1: 30001, Node 2: 30002, Node 3: 30003, etc.
GRAPE_API_PORT=30001

# Bootstrap DHT nodes (comma-separated host:port)
# Leave empty for first node, specify others for subsequent nodes
# Example: 127.0.0.1:20001,127.0.0.1:20002
GRAPE_BOOTSTRAP_NODES=

# Grape bind host (default: 127.0.0.1)
# Use 0.0.0.0 to bind all interfaces
GRAPE_HOST=127.0.0.1

# ─────────────────────────────────────────
# LEGACY GRENACHE (External Servers)
# ─────────────────────────────────────────
# Only used when EMBEDDED_GRAPE=false
# URL of external Grape server
GRAPE_URL=http://127.0.0.1:30001

# ─────────────────────────────────────────
# P2P NETWORK CONFIGURATION
# ─────────────────────────────────────────
# P2P TCP port for direct connections (each node needs different port)
# Default: 3000
P2P_PORT=3000

# P2P bind host
# Default: 0.0.0.0 (all interfaces)
P2P_HOST=0.0.0.0

# Enable mDNS local network discovery (default: true)
DISCOVERY_MDNS=true

# Enable Grenache discovery (default: true)
# Only affects external Grenache when EMBEDDED_GRAPE=false
DISCOVERY_GRENACHE=true

# Bootstrap peers for direct P2P connections (comma-separated host:port)
# Example: 127.0.0.1:3001,127.0.0.1:3002
BOOTSTRAP_PEERS=

# Peer storage file path (default: .peers.json)
PEER_STORAGE_PATH=.peers.json

# Maximum number of peers (default: 50)
MAX_PEERS=50

# Peer reconnection interval in milliseconds (default: 30000 = 30s)
PEER_RECONNECT_INTERVAL=30000

# ─────────────────────────────────────────
# EXCHANGE CONFIGURATION
# ─────────────────────────────────────────
# Trading pair (default: BTC/USD)
EXCHANGE_PAIR=BTC/USD

# Exchange port (default: 3000)
EXCHANGE_PORT=3000

# ─────────────────────────────────────────
# LOGGING CONFIGURATION
# ─────────────────────────────────────────
# Log level: trace, debug, info, warn, error, fatal
# Default: debug (development), info (production)
LOG_LEVEL=debug

# Log directory (default: src/logs)
LOG_DIR=./logs

# Maximum log files to keep (default: 10)
LOG_MAX_FILES=10

# Maximum log file size in MB (default: 10)
LOG_MAX_SIZE_MB=10

# ─────────────────────────────────────────
# PERFORMANCE CONFIGURATION
# ─────────────────────────────────────────
# Performance threshold in milliseconds (default: 10)
PERFORMANCE_THRESHOLD_MS=10

# Maximum order amount (default: 1000000)
MAX_ORDER_AMOUNT=1000000

# Maximum order price (default: 1000000)
MAX_ORDER_PRICE=1000000

# ─────────────────────────────────────────
# CIRCUIT BREAKER CONFIGURATION
# ─────────────────────────────────────────
# Failure threshold before opening circuit (default: 3)
CIRCUIT_BREAKER_FAILURE_THRESHOLD=3

# Reset timeout in milliseconds (default: 30000 = 30s)
CIRCUIT_BREAKER_RESET_TIMEOUT_MS=30000

# ─────────────────────────────────────────
# SECURITY CONFIGURATION
# ─────────────────────────────────────────
# Enable rate limiting (default: false)
ENABLE_RATE_LIMIT=false

# Maximum requests per minute (default: 1000)
MAX_REQUESTS_PER_MINUTE=1000

# Maximum orders per minute (default: 100)
MAX_ORDERS_PER_MINUTE=100

# Maximum orders per second (default: 10)
MAX_ORDERS_PER_SECOND=10

# Maximum message size in KB (default: 1024)
MAX_MESSAGE_SIZE_KB=1024

# Enable CORS (default: true)
ENABLE_CORS=true

# ─────────────────────────────────────────
# MONITORING CONFIGURATION
# ─────────────────────────────────────────
# Enable metrics (default: true)
ENABLE_METRICS=true

# Metrics port (default: 9090)
METRICS_PORT=9090

# Health check interval in milliseconds (default: 30000 = 30s)
HEALTH_CHECK_INTERVAL_MS=30000

# ─────────────────────────────────────────
# ENVIRONMENT
# ─────────────────────────────────────────
# Environment: development, staging, production, test
NODE_ENV=development

# ============================================
# EXAMPLE CONFIGURATIONS
# ============================================

# ─────────────────────────────────────────
# Example 1: Node 1 (Bootstrap) - Embedded Grape
# ─────────────────────────────────────────
# EMBEDDED_GRAPE=true
# GRAPE_DHT_PORT=20001
# GRAPE_API_PORT=30001
# GRAPE_BOOTSTRAP_NODES=
# P2P_PORT=3001

# ─────────────────────────────────────────
# Example 2: Node 2 - Embedded Grape
# ─────────────────────────────────────────
# EMBEDDED_GRAPE=true
# GRAPE_DHT_PORT=20002
# GRAPE_API_PORT=30002
# GRAPE_BOOTSTRAP_NODES=127.0.0.1:20001
# P2P_PORT=3002

# ─────────────────────────────────────────
# Example 3: Node 3 - Embedded Grape
# ─────────────────────────────────────────
# EMBEDDED_GRAPE=true
# GRAPE_DHT_PORT=20003
# GRAPE_API_PORT=30003
# GRAPE_BOOTSTRAP_NODES=127.0.0.1:20001,127.0.0.1:20002
# P2P_PORT=3003

# ─────────────────────────────────────────
# Example 4: Pure P2P (No Grape)
# ─────────────────────────────────────────
# EMBEDDED_GRAPE=false
# DISCOVERY_GRENACHE=false
# P2P_PORT=3001
# BOOTSTRAP_PEERS=127.0.0.1:3002,127.0.0.1:3003

# ─────────────────────────────────────────
# Example 5: Legacy (External Grape)
# ─────────────────────────────────────────
# EMBEDDED_GRAPE=false
# GRAPE_URL=http://127.0.0.1:30001
# P2P_PORT=3001
